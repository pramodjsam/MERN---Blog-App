(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,s){},57:function(e,t,s){},59:function(e,t,s){},65:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){},75:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(31),r=s.n(n),i=(s(37),s(5)),l=s(3),o=s(4),j=s.n(o),u=s(8),p=s(2),b=s(7),d=s.n(b),O=(s(57),s(0)),m=function(){return Object(O.jsxs)("div",{className:"header",children:[Object(O.jsxs)("div",{className:"headerTitles",children:[Object(O.jsx)("span",{className:"headerTitleSm",children:"React & Node"}),Object(O.jsx)("span",{className:"headerTitleLg",children:"Blog"})]}),Object(O.jsx)("img",{className:"headerImg",alt:"header",src:"https://images.pexels.com/photos/1167355/pexels-photo-1167355.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"})]})},h=(s(59),function(e){var t,s=e.post;return Object(O.jsxs)("div",{className:"post",children:[Object(O.jsx)("img",{className:"postImg",src:s.photo?"http://localhost:4000/images/"+s.photo:"https://images.pexels.com/photos/6685428/pexels-photo-6685428.jpeg?auto=compress",alt:"post"}),Object(O.jsxs)("div",{className:"postInfo",children:[Object(O.jsx)("div",{className:"postCats",children:null===(t=s.categories)||void 0===t?void 0:t.map((function(e){return Object(O.jsx)("span",{className:"postCat",children:e.name},e._id)}))}),Object(O.jsx)(i.b,{to:"/post/".concat(s._id),className:"link",children:Object(O.jsx)("span",{className:"postTitle",children:s.title})}),Object(O.jsx)("hr",{}),Object(O.jsx)("span",{className:"postDate",children:new Date(s.createdAt).toDateString()})]}),Object(O.jsx)("div",{className:"postDesc",children:s.desc})]})}),x=(s(65),function(e){var t=e.posts;return Object(O.jsx)("div",{className:"posts",children:t.map((function(e){return Object(O.jsx)(h,{post:e},e._id)}))})}),f=(s(66),function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),s=t[0],c=t[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/categories");case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(O.jsxs)("div",{className:"sidebar",children:[Object(O.jsxs)("div",{className:"sidebarItem",children:[Object(O.jsx)("span",{className:"sidebarTitle",children:"ABOUT ME"}),Object(O.jsx)("img",{src:"https://themegoods-cdn-pzbycso8wng.stackpathdns.com/grandblog/demo/wp-content/uploads/2015/11/aboutme.jpg",alt:"about"}),Object(O.jsx)("p",{children:"Laboris sunt aute cupidatat velit magna velit ullamco dolore mollit amet ex esse.Sunt eu ut nostrud id quis proident."})]}),Object(O.jsxs)("div",{className:"sidebarItem",children:[Object(O.jsx)("span",{className:"sidebarTitle",children:"CATEGORIES"}),Object(O.jsx)("ul",{className:"sidebarList",children:s.map((function(e){return Object(O.jsx)(i.b,{to:"/?cat=".concat(e.name),className:"link",children:Object(O.jsx)("li",{className:"sidebarListItem",children:e.name})},e._id)}))})]}),Object(O.jsxs)("div",{className:"sidebarItem",children:[Object(O.jsx)("div",{className:"sidebarTitle",children:"FOLLOW US"}),Object(O.jsxs)("div",{className:"sidebarSocial",children:[Object(O.jsx)("i",{className:"sidebarIcon fab fa-facebook-square"}),Object(O.jsx)("i",{className:"sidebarIcon fab fa-twitter-square"}),Object(O.jsx)("i",{className:"sidebarIcon fab fa-pinterest-square"}),Object(O.jsx)("i",{className:"sidebarIcon fab fa-instagram-square"})]})]})]})}),g=(s(67),function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),s=t[0],c=t[1],n=Object(l.f)().search;return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/posts/".concat(n));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{}),Object(O.jsxs)("div",{className:"home",children:[Object(O.jsx)(x,{posts:s}),Object(O.jsx)(f,{})]})]})}),v=s(14),N=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":case"UPDATE_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"UPDATE_START":return Object(v.a)(Object(v.a)({},e),{},{isFetching:!0});case"UPDATE_FAILURE":return{user:e.user,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}},w={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},I=Object(a.createContext)(w),y=function(e){var t=e.children,s=Object(a.useReducer)(N,w),c=Object(p.a)(s,2),n=c[0],r=c[1];return Object(a.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n.user))}),[n.user]),Object(O.jsx)(I.Provider,{value:Object(v.a)(Object(v.a)({},n),{},{dispatch:r}),children:t})},S=(s(68),function(){var e=Object(a.useContext)(I),t=e.dispatch,s=e.isFetching,c=Object(a.useRef)(),n=Object(a.useRef)(),r=function(){var e=Object(u.a)(j.a.mark((function e(s){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t({type:"LOGIN_START"}),e.prev=2,e.next=5,d.a.post("/api/auth/login",{username:c.current.value,password:n.current.value});case 5:a=e.sent,t({type:"LOGIN_SUCCESS",payload:a.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:"LOGIN_FAILURE"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"login",children:[Object(O.jsx)("span",{className:"loginTitle",children:"Login"}),Object(O.jsxs)("form",{className:"loginForm",onSubmit:r,children:[Object(O.jsx)("label",{children:"Username"}),Object(O.jsx)("input",{type:"text",className:"loginInput",placeholder:"Enter your username",ref:c}),Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)("input",{type:"password",className:"loginInput",placeholder:"Enter your password",ref:n}),Object(O.jsx)("button",{type:"submit",className:"loginButton",disabled:s,children:"Login"})]}),Object(O.jsx)("button",{className:"loginRegisterButton",children:Object(O.jsx)(i.b,{className:"link",to:"/register",children:"Register"})})]})}),T=(s(69),function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(""),r=Object(p.a)(n,2),l=r[0],o=r[1],b=Object(a.useState)(""),m=Object(p.a)(b,2),h=m[0],x=m[1],f=Object(a.useState)(!1),g=Object(p.a)(f,2),v=g[0],N=g[1],w=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,N(!1),e.next=5,d.a.post("/api/auth/register",{username:s,email:h,password:l});case 5:e.sent.data&&window.location.replace("/login"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),N(!0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"register",children:[Object(O.jsx)("span",{className:"registerTitle",children:"Register"}),Object(O.jsxs)("form",{className:"registerForm",onSubmit:w,children:[Object(O.jsx)("label",{children:"Username"}),Object(O.jsx)("input",{type:"text",className:"registerInput",placeholder:"Enter your username",value:s,onChange:function(e){return c(e.target.value)}}),Object(O.jsx)("label",{children:"Email"}),Object(O.jsx)("input",{type:"email",className:"registerInput",placeholder:"Enter your email",value:h,onChange:function(e){return x(e.target.value)}}),Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)("input",{type:"password",className:"registerInput",placeholder:"Enter your password",value:l,onChange:function(e){return o(e.target.value)}}),Object(O.jsx)("button",{type:"submit",className:"registerButton",children:"register"})]}),Object(O.jsx)("button",{className:"registerLoginButton",children:Object(O.jsx)(i.b,{to:"/login",className:"link",children:"Login"})}),v&&Object(O.jsx)("span",{style:{color:"red",marginTop:"10px"},children:"Something went wrong"})]})}),L=(s(70),function(){var e=Object(a.useContext)(I),t=e.user,s=e.dispatch,c=Object(a.useState)(null),n=Object(p.a)(c,2),r=n[0],i=n[1],l=Object(a.useState)(""),o=Object(p.a)(l,2),b=o[0],m=o[1],h=Object(a.useState)(""),x=Object(p.a)(h,2),g=x[0],v=x[1],N=Object(a.useState)(""),w=Object(p.a)(N,2),y=w[0],S=w[1],T=Object(a.useState)(!1),L=Object(p.a)(T,2),C=L[0],P=L[1],k=function(){var e=Object(u.a)(j.a.mark((function e(a){var c,n,i,l,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s({type:"UPDATE_START"}),c={userId:t._id,username:b,email:g,password:y},!r){e.next=18;break}return n=new FormData,i=/\s|\(|\)/g,l=r.name.replace(i,"_"),n.append("name",l),n.append("file",r),c.profilePic=l,e.prev=10,e.next=13,d.a.post("/upload",n);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log(e.t0);case 18:return e.prev=18,e.next=21,d.a.put("/users/".concat(t._id),c);case 21:o=e.sent,s({type:"UPDATE_SUCCESS",payload:o.data}),P(!0),setTimeout((function(){P(!1)}),5e3),e.next=31;break;case 27:e.prev=27,e.t1=e.catch(18),s({type:"UPDATE_FAILURE"}),console.log(e.t1);case 31:case"end":return e.stop()}}),e,null,[[10,15],[18,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"settings",children:[Object(O.jsxs)("div",{className:"settingsWrapper",children:[Object(O.jsxs)("div",{className:"settingsTitle",children:[Object(O.jsx)("span",{className:"settingsUpdateTitle",children:"Update Your Account"}),Object(O.jsx)("span",{className:"settingsDeleteTitle",children:"Delete Account"})]}),Object(O.jsxs)("form",{className:"settingsForm",onSubmit:k,children:[Object(O.jsx)("label",{children:"Profile Picture"}),Object(O.jsxs)("div",{className:"settingsPP",children:[Object(O.jsx)("img",{alt:"pp",src:r?URL.createObjectURL(r):t.profilePic?"http://localhost:4000/images/"+t.profilePic:"https://images.pexels.com/photos/6685428/pexels-photo-6685428.jpeg"}),Object(O.jsx)("label",{htmlFor:"fileInput",children:Object(O.jsx)("i",{className:"settingsPPIcon far fa-user-circle"})}),Object(O.jsx)("input",{type:"file",id:"fileInput",onChange:function(e){return i(e.target.files[0])},style:{display:"none"}})]}),Object(O.jsx)("label",{children:"Username"}),Object(O.jsx)("input",{type:"text",placeholder:t.username,value:b,onChange:function(e){return m(e.target.value)}}),Object(O.jsx)("label",{children:"Email"}),Object(O.jsx)("input",{type:"email",placeholder:t.email,value:g,onChange:function(e){return v(e.target.value)}}),Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)("input",{type:"password",value:y,onChange:function(e){return S(e.target.value)}}),Object(O.jsx)("button",{className:"settingsSubmit",type:"submit",children:"Update"}),C&&Object(O.jsx)("span",{style:{color:"green",textAlign:"center",marginTop:"10px"},children:"Profile has been updated"})]})]}),Object(O.jsx)(f,{})]})}),C=(s(71),function(){var e=Object(a.useContext)(I).user,t=Object(a.useState)({}),s=Object(p.a)(t,2),c=s[0],n=s[1],r=Object(a.useState)(""),o=Object(p.a)(r,2),b=o[0],m=o[1],h=Object(a.useState)(""),x=Object(p.a)(h,2),f=x[0],g=x[1],v=Object(a.useState)(!1),N=Object(p.a)(v,2),w=N[0],y=N[1],S=Object(l.f)().pathname.split("/")[2];Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/posts/".concat(S));case 2:t=e.sent,n(t.data),m(t.data.title),g(t.data.desc);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[S]);var T=function(){var t=Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.delete("/posts/".concat(S),{data:{username:e.username}});case 3:window.location.replace("/"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.put("/posts/".concat(S),{username:e.username,title:b,desc:f});case 2:y(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c?Object(O.jsx)("div",{className:"singlePost",children:Object(O.jsxs)("div",{className:"singlePostWrapper",children:[Object(O.jsx)("img",{src:c.photo?"http://localhost:4000/images/"+c.photo:"https://images.pexels.com/photos/6685428/pexels-photo-6685428.jpeg",className:"singlePostImg",alt:"single"}),w?Object(O.jsx)("input",{type:"text",value:b,onChange:function(e){return m(e.target.value)},className:"singlePostTitleInput",autoFocus:!0}):Object(O.jsxs)("h1",{className:"singlePostTitle",children:[b,c.username===e.username&&Object(O.jsxs)("div",{className:"singlePostEdit",onClick:function(){return y(!0)},children:[Object(O.jsx)("i",{className:"singlePostIcon far fa-edit"}),Object(O.jsx)("i",{className:"singlePostIcon far fa-trash-alt",onClick:T})]})]}),Object(O.jsxs)("div",{className:"singlePostInfo",children:[Object(O.jsxs)("span",{className:"singlePostAuthor",children:["Author:",Object(O.jsx)(i.b,{className:"link",to:"/?user=".concat(c.username),children:Object(O.jsx)("b",{children:c.username})})]}),Object(O.jsx)("span",{className:"singlePostDate",children:new Date(c.createdAt).toDateString()})]}),w?Object(O.jsx)("textarea",{type:"text",value:f,onChange:function(e){return g(e.target.value)},className:"singlePostDescInput"}):Object(O.jsx)("p",{className:"singlePostDesc",children:f}),w&&Object(O.jsx)("button",{className:"singlePostButton",onClick:L,children:"Update"})]})}):Object(O.jsx)("div",{})}),P=(s(72),function(){return Object(O.jsxs)("div",{className:"single",children:[Object(O.jsx)(C,{}),Object(O.jsx)(f,{})]})}),k=(s(73),function(){var e=Object(a.useContext)(I).user,t=Object(a.useState)(""),s=Object(p.a)(t,2),c=s[0],n=s[1],r=Object(a.useState)(""),i=Object(p.a)(r,2),l=i[0],o=i[1],b=Object(a.useState)(null),m=Object(p.a)(b,2),h=m[0],x=m[1],f=function(){var t=Object(u.a)(j.a.mark((function t(s){var a,n,r,i,o,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),a={title:c,desc:l,username:e.username},!h){t.next=18;break}return n=new FormData,r=/\s|\(|\)/g,i=h.name.replace(r,"_"),o="".concat(Date.now(),"_").concat(i),n.append("name",o),n.append("file",h),a.photo=o,t.prev=10,t.next=13,d.a.post("/api/upload",n);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),console.log(t.t0);case 18:return t.next=20,d.a.post("/api/posts",a);case 20:u=t.sent,window.location.replace("/post/".concat(u.data._id));case 22:case"end":return t.stop()}}),t,null,[[10,15]])})));return function(e){return t.apply(this,arguments)}}();return h&&(console.log("file",h),console.log("URLC",URL.createObjectURL(h))),Object(O.jsxs)("div",{className:"write",children:[h&&Object(O.jsx)("img",{className:"writeImg",src:URL.createObjectURL(h),alt:"write"}),Object(O.jsxs)("form",{className:"writeForm",onSubmit:f,children:[Object(O.jsxs)("div",{className:"writeFormGroup",children:[Object(O.jsx)("label",{htmlFor:"fileInput",children:Object(O.jsx)("i",{className:" writeIcon fas fa-plus"})}),Object(O.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return x(e.target.files[0])}}),Object(O.jsx)("input",{type:"text",placeholder:"Title",className:"writeInput",autoFocus:!0,value:c,onChange:function(e){return n(e.target.value)}})]}),Object(O.jsx)("div",{className:"writeFormGroup",children:Object(O.jsx)("textarea",{type:"text",placeholder:"Tell your story...",className:"writeInput writeText",value:l,onChange:function(e){return o(e.target.value)}})}),Object(O.jsx)("button",{className:"writeSubmit",type:"submit",children:"Publish"})]})]})}),E=(s(74),function(){var e=Object(a.useContext)(I),t=e.user,s=e.dispatch;return Object(O.jsxs)("div",{className:"top",children:[Object(O.jsxs)("div",{className:"topLeft",children:[Object(O.jsx)("i",{className:"topIcon fab fa-facebook-square"}),Object(O.jsx)("i",{className:"topIcon fab fa-twitter-square"}),Object(O.jsx)("i",{className:"topIcon fab fa-pinterest-square"}),Object(O.jsx)("i",{className:"topIcon fab fa-instagram-square"})]}),Object(O.jsx)("div",{className:"topCenter",children:Object(O.jsxs)("ul",{className:"topList",children:[Object(O.jsx)("li",{className:"topListItem",children:Object(O.jsx)(i.b,{className:"link",to:"/",children:"HOME"})}),Object(O.jsx)("li",{className:"topListItem",children:Object(O.jsx)(i.b,{className:"link",to:"/",children:"ABOUT"})}),Object(O.jsx)("li",{className:"topListItem",children:Object(O.jsx)(i.b,{className:"link",to:"/",children:"CONTACT"})}),Object(O.jsx)("li",{className:"topListItem",children:Object(O.jsx)(i.b,{className:"link",to:"/write",children:"WRITE"})}),Object(O.jsx)("li",{className:"topListItem",onClick:function(){s({type:"LOGOUT"})},children:t&&"LOGOUT"})]})}),Object(O.jsxs)("div",{className:"topRight",children:[t?Object(O.jsx)(i.b,{to:"/settings",className:"link",children:Object(O.jsx)("img",{className:"topImg",alt:"top",src:t.profilePic?"http://localhost:4000/images/"+t.profilePic:"https://images.pexels.com/photos/1858175/pexels-photo-1858175.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500"})}):Object(O.jsxs)("ul",{className:"topList",children:[Object(O.jsx)("li",{className:"topListItem",children:Object(O.jsx)(i.b,{to:"/login",className:"link",children:"LOGIN"})}),Object(O.jsx)("li",{className:"topListItem",children:Object(O.jsx)(i.b,{to:"/register",className:"link",children:"REGISTER"})})]}),Object(O.jsx)("i",{className:"topSearchIcon fas fa-search"})]})]})});var U=function(){var e=Object(a.useContext)(I).user;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(i.a,{children:[Object(O.jsx)(E,{}),Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/",exact:!0,children:Object(O.jsx)(g,{})}),Object(O.jsx)(l.a,{path:"/register",exact:!0,children:e?Object(O.jsx)(g,{}):Object(O.jsx)(T,{})}),Object(O.jsx)(l.a,{path:"/login",exact:!0,children:e?Object(O.jsx)(g,{}):Object(O.jsx)(S,{})}),Object(O.jsx)(l.a,{path:"/write",exact:!0,children:e?Object(O.jsx)(k,{}):Object(O.jsx)(S,{})}),Object(O.jsx)(l.a,{path:"/settings",exact:!0,children:e?Object(O.jsx)(L,{}):Object(O.jsx)(S,{})}),Object(O.jsx)(l.a,{path:"/post/:postId",exact:!0,children:Object(O.jsx)(P,{})})]})]})})},F=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,76)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(y,{children:Object(O.jsx)(U,{})})}),document.getElementById("root")),F()}},[[75,1,2]]]);
//# sourceMappingURL=main.41cb3aa4.chunk.js.map